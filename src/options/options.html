<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BookDrive Advanced Settings</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />
    <style>
      /* Material Design 3 Variables */
      :root {
        --md-primary: #1a73e8;
        --md-primary-container: #e8f0fe;
        --md-on-primary: #ffffff;
        --md-on-primary-container: #174ea6;
        
        --md-secondary: #5f6368;
        --md-secondary-container: #f1f3f4;
        --md-on-secondary: #ffffff;
        --md-on-secondary-container: #3c4043;
        
        --md-tertiary: #34a853;
        --md-tertiary-container: #e6f4ea;
        --md-on-tertiary: #ffffff;
        --md-on-tertiary-container: #137333;
        
        --md-error: #d93025;
        --md-error-container: #fce8e6;
        --md-on-error: #ffffff;
        --md-on-error-container: #a50e0e;
        
        --md-surface: #ffffff;
        --md-surface-container: #f8f9fa;
        --md-surface-container-high: #f1f3f4;
        --md-surface-container-highest: #e8eaed;
        --md-surface-variant: #f1f3f4;
        --md-on-surface: #202124;
        --md-on-surface-variant: #5f6368;
        
        --md-outline: #dadce0;
        --md-outline-variant: #e8eaed;
        
        --md-elevation-1: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        --md-elevation-2: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
        --md-elevation-3: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
        
        --md-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --md-font-size-small: 0.75rem;
        --md-font-size-body: 0.875rem;
        --md-font-size-title: 1.25rem;
        --md-font-size-headline: 1.5rem;
        
        --md-spacing-xs: 0.25rem;
        --md-spacing-sm: 0.5rem;
        --md-spacing-md: 0.75rem;
        --md-spacing-lg: 1.25rem;
        --md-spacing-xl: 1.75rem;
        --md-spacing-xxl: 2.25rem;
        
        --md-radius-sm: 0.5rem;
        --md-radius-md: 0.75rem;
        --md-radius-lg: 1rem;
        
        --md-transition-fast: 0.15s ease-out;
        --md-transition-normal: 0.25s ease-out;
        --md-transition-slow: 0.35s ease-out;
      }

      /* Dark Theme */
      [data-theme="dark"] {
        --md-primary: #8ab4f8;
        --md-primary-container: #174ea6;
        --md-on-primary: #202124;
        --md-on-primary-container: #e8f0fe;
        
        --md-secondary: #9aa0a6;
        --md-secondary-container: #3c4043;
        --md-on-secondary: #202124;
        --md-on-secondary-container: #f1f3f4;
        
        --md-tertiary: #81c995;
        --md-tertiary-container: #137333;
        --md-on-tertiary: #202124;
        --md-on-tertiary-container: #e6f4ea;
        
        --md-error: #f28b82;
        --md-error-container: #a50e0e;
        --md-on-error: #202124;
        --md-on-error-container: #fce8e6;
        
        --md-surface: #202124;
        --md-surface-container: #2d2e30;
        --md-surface-container-high: #3c4043;
        --md-surface-container-highest: #5f6368;
        --md-surface-variant: #3c4043;
        --md-on-surface: #e8eaed;
        --md-on-surface-variant: #9aa0a6;
        
        --md-outline: #5f6368;
        --md-outline-variant: #3c4043;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: var(--md-font-family);
        background: var(--md-surface);
        color: var(--md-on-surface);
        line-height: 1.6;
        padding: var(--md-spacing-xl);
        max-width: 800px;
        margin: 0 auto;
        transition: background-color var(--md-transition-normal), color var(--md-transition-normal);
      }

      .header {
        display: flex;
        align-items: center;
        gap: var(--md-spacing-lg);
        margin-bottom: var(--md-spacing-xxl);
        padding-bottom: var(--md-spacing-lg);
        border-bottom: 1px solid var(--md-outline);
      }

      .header-icon {
        width: 48px;
        height: 48px;
        border-radius: var(--md-radius-md);
        background: var(--md-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--md-on-primary);
      }

      .header-content h1 {
        font-size: var(--md-font-size-headline);
        font-weight: 600;
        color: var(--md-on-surface);
        margin-bottom: var(--md-spacing-xs);
      }

      .header-content p {
        color: var(--md-on-surface-variant);
        font-size: var(--md-font-size-body);
      }

      .settings-container {
        display: grid;
        gap: var(--md-spacing-xl);
      }

      .settings-card {
        background: var(--md-surface-container);
        border: 1px solid var(--md-outline);
        border-radius: var(--md-radius-lg);
        padding: var(--md-spacing-xl);
        transition: all var(--md-transition-normal);
      }

      .settings-card:hover {
        box-shadow: var(--md-elevation-2);
        border-color: var(--md-primary);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: var(--md-spacing-md);
        margin-bottom: var(--md-spacing-lg);
      }

      .card-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--md-radius-sm);
        background: var(--md-primary-container);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--md-on-primary-container);
      }

      .card-title {
        font-size: var(--md-font-size-title);
        font-weight: 600;
        color: var(--md-on-surface);
      }

      .form-group {
        margin-bottom: var(--md-spacing-lg);
      }

      .form-group:last-child {
        margin-bottom: 0;
      }

      .form-label {
        display: block;
        font-weight: 500;
        color: var(--md-on-surface);
        margin-bottom: var(--md-spacing-sm);
        font-size: var(--md-font-size-body);
      }

      .form-control {
        width: 100%;
        padding: var(--md-spacing-md);
        border: 1px solid var(--md-outline);
        border-radius: var(--md-radius-sm);
        background: var(--md-surface);
        color: var(--md-on-surface);
        font-size: var(--md-font-size-body);
        transition: all var(--md-transition-fast);
      }

      .form-control:focus {
        outline: none;
        border-color: var(--md-primary);
        box-shadow: 0 0 0 2px var(--md-primary-container);
      }

      .form-control:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        background: var(--md-surface-container-high);
      }

      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }

      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--md-outline);
        transition: var(--md-transition-fast);
        border-radius: 34px;
      }

      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: var(--md-transition-fast);
        border-radius: 50%;
      }

      input:checked + .toggle-slider {
        background-color: var(--md-primary);
      }

      input:checked + .toggle-slider:before {
        transform: translateX(26px);
      }

      .toggle-container {
        display: flex;
        align-items: center;
        gap: var(--md-spacing-md);
      }

      .toggle-label {
        font-weight: 500;
        color: var(--md-on-surface);
        font-size: var(--md-font-size-body);
      }

      .btn {
        padding: var(--md-spacing-md) var(--md-spacing-lg);
        border: none;
        border-radius: var(--md-radius-sm);
        font-size: var(--md-font-size-body);
        font-weight: 500;
        cursor: pointer;
        transition: all var(--md-transition-fast);
        display: inline-flex;
        align-items: center;
        gap: var(--md-spacing-sm);
        text-decoration: none;
      }

      .btn-primary {
        background: var(--md-primary);
        color: var(--md-on-primary);
      }

      .btn-primary:hover {
        background: var(--md-on-primary-container);
        transform: translateY(-1px);
        box-shadow: var(--md-elevation-2);
      }

      .btn-secondary {
        background: var(--md-secondary-container);
        color: var(--md-on-secondary-container);
        border: 1px solid var(--md-outline);
      }

      .btn-secondary:hover {
        background: var(--md-surface-container-high);
        transform: translateY(-1px);
        box-shadow: var(--md-elevation-1);
      }

      .btn-danger {
        background: var(--md-error);
        color: var(--md-on-error);
      }

      .btn-danger:hover {
        background: var(--md-on-error-container);
        transform: translateY(-1px);
        box-shadow: var(--md-elevation-2);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      .btn-group {
        display: flex;
        gap: var(--md-spacing-md);
        flex-wrap: wrap;
      }

      .status-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--md-spacing-xs);
        padding: var(--md-spacing-xs) var(--md-spacing-sm);
        border-radius: var(--md-radius-sm);
        font-size: var(--md-font-size-small);
        font-weight: 500;
      }

      .status-badge.enabled {
        background: var(--md-tertiary-container);
        color: var(--md-on-tertiary-container);
      }

      .status-badge.disabled {
        background: var(--md-error-container);
        color: var(--md-on-error-container);
      }

      .status-badge.required {
        background: var(--md-primary-container);
        color: var(--md-on-primary-container);
      }

      .help-text {
        font-size: var(--md-font-size-small);
        color: var(--md-on-surface-variant);
        margin-top: var(--md-spacing-xs);
      }

      .validation-error {
        border-color: var(--md-error) !important;
        background-color: var(--md-error-container);
      }

      .validation-success {
        border-color: var(--md-tertiary) !important;
        background-color: var(--md-tertiary-container);
      }

      .error-message {
        color: var(--md-error);
        font-size: var(--md-font-size-small);
        margin-top: var(--md-spacing-xs);
      }

      .toast-container {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--md-surface-container);
        color: var(--md-on-surface);
        padding: var(--md-spacing-md) var(--md-spacing-lg);
        border-radius: var(--md-radius-sm);
        box-shadow: var(--md-elevation-3);
        z-index: 1000;
        border: 1px solid var(--md-outline);
        display: none;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: var(--md-spacing-sm);
        margin-top: var(--md-spacing-xl);
        color: var(--md-primary);
        text-decoration: none;
        font-weight: 500;
        transition: color var(--md-transition-fast);
      }

      .back-link:hover {
        color: var(--md-on-primary-container);
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      @media (max-width: 768px) {
        body {
          padding: var(--md-spacing-lg);
        }
        
        .btn-group {
          flex-direction: column;
        }
        
        .btn {
          width: 100%;
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="header-icon">
        <span class="material-icons">settings</span>
      </div>
      <div class="header-content">
        <h1>Advanced Settings</h1>
        <p>Configure BookDrive's advanced features and preferences</p>
      </div>
    </div>

    <form id="options-form" aria-labelledby="options-title" autocomplete="off" role="form">
      <div class="settings-container">
        <!-- Theme Settings -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">palette</span>
            </div>
            <h2 class="card-title">Appearance</h2>
          </div>
          
          <div class="form-group">
            <label for="theme-select" class="form-label">Theme</label>
            <select id="theme-select" name="theme" class="form-control" aria-describedby="theme-desc">
              <option value="auto">Auto (System)</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
            <div id="theme-desc" class="help-text">Choose your preferred theme. Auto follows your system settings.</div>
          </div>
        </div>

        <!-- Sync Settings -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">sync</span>
            </div>
            <h2 class="card-title">Sync Configuration</h2>
          </div>
          
          <div class="form-group">
            <label for="mode-select" class="form-label">Sync Mode</label>
            <select id="mode-select" name="mode" class="form-control" aria-describedby="mode-desc">
              <option value="host">Host-to-Many</option>
              <option value="global">Global Sync</option>
            </select>
            <div id="mode-desc" class="help-text">Choose how bookmarks are synchronized across devices</div>
          </div>

          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="auto-sync-toggle" name="autoSync" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable Auto Sync</span>
            </div>
            <div class="help-text">Automatically sync bookmarks at regular intervals</div>
          </div>

          <div class="form-group">
            <label for="sync-interval" class="form-label">Sync Interval (minutes)</label>
            <input
              type="number"
              id="sync-interval"
              name="syncInterval"
              min="5"
              max="1440"
              step="5"
              class="form-control"
              aria-describedby="interval-desc"
            />
            <div id="interval-desc" class="help-text">Set the interval in minutes for automatic sync (5-1440 minutes)</div>
          </div>
        </div>

        <!-- Team Mode -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">group</span>
            </div>
            <h2 class="card-title">Team Mode</h2>
          </div>
          
          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="team-mode-toggle" name="teamMode" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable Team Mode (Multi-User)</span>
            </div>
            <div class="help-text">Allow multiple users to collaborate on bookmark synchronization</div>
          </div>

          <div id="team-options" style="display: none;">
            <div class="form-group">
              <label for="user-email" class="form-label">Your Email (for Team Mode)</label>
              <input
                type="email"
                id="user-email"
                name="userEmail"
                placeholder="you@example.com"
                class="form-control"
                aria-describedby="email-desc"
              />
              <div id="email-desc" class="help-text">Required for team mode identification</div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Team Members</label>
              <div id="team-members-list" class="help-text">No team members added yet</div>
              
              <div class="btn-group" style="margin-top: var(--md-spacing-md);">
                <input
                  type="email"
                  id="new-member-email"
                  placeholder="member@example.com"
                  class="form-control"
                  style="flex: 1;"
                />
                <select id="new-member-role" class="form-control" style="width: auto;">
                  <option value="member">Member</option>
                  <option value="admin">Admin</option>
                </select>
                <button type="button" id="add-member-btn" class="btn btn-secondary">Add Member</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Analytics & Logging -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">analytics</span>
            </div>
            <h2 class="card-title">Analytics & Logging</h2>
          </div>
          
          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="sync-analytics-toggle" name="syncAnalytics" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable Sync Analytics</span>
            </div>
            <div class="help-text">Track sync performance and generate timeline graphs</div>
          </div>

          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="verbose-logs-toggle" name="verboseLogs" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Verbose Logs</span>
            </div>
            <div class="help-text">Enable detailed logging for debugging</div>
          </div>

          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="perf-logs-toggle" name="perfLogs" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable Performance Logging</span>
            </div>
            <div class="help-text">Track performance metrics for optimization</div>
          </div>

          <div class="btn-group">
            <button type="button" id="view-analytics-btn" class="btn btn-secondary">
              <span class="material-icons">analytics</span>
              View Analytics
            </button>
            <button type="button" id="export-logs-btn" class="btn btn-secondary">
              <span class="material-icons">download</span>
              Export Logs
            </button>
            <button type="button" id="clear-logs-btn" class="btn btn-danger">
              <span class="material-icons">delete</span>
              Clear Logs
            </button>
          </div>
        </div>

        <!-- Encryption -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">security</span>
            </div>
            <h2 class="card-title">Encryption</h2>
          </div>
          
          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="encryption-toggle" name="encryption" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable End-to-End Encryption</span>
            </div>
            <div class="help-text">When enabled, your bookmark data will be encrypted before being stored in Google Drive</div>
          </div>

          <div id="encryption-options" style="display: none;">
            <div class="form-group">
              <div id="encryption-status" class="status-badge disabled">
                <span class="material-icons">lock</span>
                Encryption Disabled
              </div>
            </div>
            
            <div class="form-group">
              <label for="encryption-algorithm" class="form-label">Encryption Algorithm</label>
              <select id="encryption-algorithm" name="encryptionAlgorithm" class="form-control" aria-describedby="algorithm-desc">
                <!-- Will be populated with JavaScript -->
              </select>
              <div id="algorithm-desc" class="help-text">Choose the encryption algorithm to use</div>
            </div>
            
            <div class="form-group">
              <label for="encryption-passphrase" class="form-label">Encryption Passphrase</label>
              <input
                type="password"
                id="encryption-passphrase"
                name="encryptionPassphrase"
                placeholder="Enter a strong passphrase"
                class="form-control"
                aria-describedby="passphrase-desc"
              />
              <div id="passphrase-desc" class="help-text">Enter a strong passphrase for encryption</div>
              
              <div class="passphrase-strength" id="passphrase-strength" style="display: none;">
                <!-- Passphrase strength indicator will be displayed here -->
              </div>
            </div>

            <div class="form-group" id="confirm-passphrase-section" style="display: none;">
              <label for="confirm-passphrase" class="form-label">Confirm Passphrase</label>
              <input
                type="password"
                id="confirm-passphrase"
                name="confirmPassphrase"
                placeholder="Confirm your passphrase"
                class="form-control"
              />
            </div>

            <div class="btn-group">
              <button type="button" id="enable-encryption-btn" class="btn btn-primary">
                <span class="material-icons">lock</span>
                Enable Encryption
              </button>
              <button type="button" id="change-passphrase-btn" class="btn btn-secondary" style="display: none;">
                <span class="material-icons">edit</span>
                Change Passphrase
              </button>
              <button type="button" id="disable-encryption-btn" class="btn btn-danger" style="display: none;">
                <span class="material-icons">lock_open</span>
                Disable Encryption
              </button>
            </div>
          </div>
        </div>

        <!-- Conflict Resolution -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">merge_type</span>
            </div>
            <h2 class="card-title">Conflict Resolution</h2>
          </div>
          
          <div class="form-group">
            <label for="conflict-strategy" class="form-label">Default Conflict Resolution Strategy</label>
            <select id="conflict-strategy" name="conflictStrategy" class="form-control" aria-describedby="strategy-desc">
              <!-- Will be populated with JavaScript -->
            </select>
            <div id="strategy-desc" class="help-text">Choose how conflicts should be resolved by default</div>
          </div>

          <div class="btn-group">
            <button type="button" id="resolve-conflicts-btn" class="btn btn-primary">
              <span class="material-icons">merge_type</span>
              Resolve Conflicts Now
            </button>
          </div>
        </div>

        <!-- Smart Folders -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">folder_special</span>
            </div>
            <h2 class="card-title">Smart Folders</h2>
          </div>
          
          <div class="form-group">
            <label for="smart-folder-name" class="form-label">Smart Folder Name</label>
            <input
              type="text"
              id="smart-folder-name"
              name="smartFolderName"
              placeholder="Enter folder name"
              class="form-control"
              aria-describedby="smart-folder-desc"
            />
            <div id="smart-folder-desc" class="help-text">Create a new smart folder with custom rules</div>
          </div>

          <div class="form-group">
            <label for="smart-folder-rules" class="form-label">Smart Folder Rules (JSON)</label>
            <textarea
              id="smart-folder-rules"
              name="smartFolderRules"
              placeholder='[{"type": "domain_match", "operator": "equals", "value": "example.com"}]'
              class="form-control"
              rows="4"
              aria-describedby="rules-desc"
            ></textarea>
            <div id="rules-desc" class="help-text">Define rules for the smart folder in JSON format</div>
          </div>

          <div class="btn-group">
            <button type="button" id="create-smart-folder-btn" class="btn btn-primary">
              <span class="material-icons">create_new_folder</span>
              Create Smart Folder
            </button>
          </div>

          <div class="form-group" style="margin-top: var(--md-spacing-lg);">
            <label class="form-label">Existing Smart Folders</label>
            <div id="smart-folders-list" class="help-text">Loading smart folders...</div>
          </div>
        </div>

        <!-- Public Collections -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">public</span>
            </div>
            <h2 class="card-title">Public Collections</h2>
          </div>
          
          <div class="form-group">
            <label for="collection-name" class="form-label">Collection Name</label>
            <input
              type="text"
              id="collection-name"
              name="collectionName"
              placeholder="Enter collection name"
              class="form-control"
              aria-describedby="collection-desc"
            />
            <div id="collection-desc" class="help-text">Create a new public collection</div>
          </div>

          <div class="form-group">
            <label for="collection-description" class="form-label">Description</label>
            <textarea
              id="collection-description"
              name="collectionDescription"
              placeholder="Enter collection description"
              class="form-control"
              rows="3"
              aria-describedby="description-desc"
            ></textarea>
            <div id="description-desc" class="help-text">Describe what this collection contains</div>
          </div>

          <div class="form-group">
            <label for="collection-visibility" class="form-label">Visibility</label>
            <select id="collection-visibility" name="collectionVisibility" class="form-control" aria-describedby="visibility-desc">
              <option value="private">Private</option>
              <option value="unlisted">Unlisted</option>
              <option value="public">Public</option>
              <option value="team">Team</option>
            </select>
            <div id="visibility-desc" class="help-text">Choose who can see this collection</div>
          </div>

          <div class="btn-group">
            <button type="button" id="create-collection-btn" class="btn btn-primary">
              <span class="material-icons">add</span>
              Create Collection
            </button>
          </div>

          <div class="form-group" style="margin-top: var(--md-spacing-lg);">
            <label class="form-label">Existing Collections</label>
            <div id="public-collections-list" class="help-text">Loading collections...</div>
          </div>
        </div>

        <!-- Scheduled Backups -->
        <div class="settings-card">
          <div class="card-header">
            <div class="card-icon">
              <span class="material-icons">schedule</span>
            </div>
            <h2 class="card-title">Scheduled Backups</h2>
          </div>
          
          <div class="form-group">
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" id="scheduled-backups-toggle" name="scheduledBackups" />
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Enable Scheduled Backups</span>
            </div>
            <div class="help-text">When enabled, backups will be created automatically according to your schedule</div>
          </div>

          <div id="scheduled-backup-options">
            <div class="form-group">
              <label for="backup-frequency" class="form-label">Backup Frequency</label>
              <select id="backup-frequency" name="backupFrequency" class="form-control" aria-describedby="frequency-desc">
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="bi-weekly">Bi-weekly</option>
                <option value="monthly">Monthly</option>
              </select>
              <div id="frequency-desc" class="help-text">How often backups should be created</div>
            </div>

            <div id="day-selector-container" style="display: none;">
              <div class="form-group">
                <label for="day-selector" class="form-label">Day</label>
                <select id="day-selector" name="daySelector" class="form-control" aria-describedby="day-desc">
                  <option value="0">Sunday</option>
                  <option value="1">Monday</option>
                  <option value="2">Tuesday</option>
                  <option value="3">Wednesday</option>
                  <option value="4">Thursday</option>
                  <option value="5">Friday</option>
                  <option value="6">Saturday</option>
                </select>
                <div id="day-desc" class="help-text">The day of the week when weekly or bi-weekly backups will be created</div>
              </div>
            </div>

            <div id="day-of-month-container" style="display: none;">
              <div class="form-group">
                <label for="day-of-month" class="form-label">Day of Month</label>
                <select id="day-of-month" name="dayOfMonth" class="form-control" aria-describedby="day-of-month-desc">
                  <!-- Will be populated with JavaScript -->
                </select>
                <div id="day-of-month-desc" class="help-text">The day of the month when monthly backups will be created</div>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Time</label>
              <div style="display: flex; gap: var(--md-spacing-sm); align-items: center;">
                <select id="backup-hour" name="backupHour" class="form-control" style="width: auto;" aria-describedby="time-desc">
                  <!-- Will be populated with JavaScript -->
                </select>
                <span>:</span>
                <select id="backup-minute" name="backupMinute" class="form-control" style="width: auto;">
                  <!-- Will be populated with JavaScript -->
                </select>
              </div>
              <div id="time-desc" class="help-text">The time when backups will be created (24-hour format)</div>
            </div>

            <div class="form-group">
              <label for="retention-policy" class="form-label">Retention Policy</label>
              <select id="retention-policy" name="retentionPolicy" class="form-control" aria-describedby="retention-desc">
                <option value="5">Keep 5 backups</option>
                <option value="10">Keep 10 backups</option>
                <option value="20">Keep 20 backups</option>
                <option value="50">Keep 50 backups</option>
                <option value="-1">Keep unlimited backups</option>
              </select>
              <div id="retention-desc" class="help-text">When the limit is reached, the oldest scheduled backup will be automatically removed</div>
            </div>

            <div class="btn-group">
              <a href="../backup-history/backup-history.html" class="btn btn-secondary">
                <span class="material-icons">history</span>
                View Backup History
              </a>
            </div>
          </div>
        </div>

        <!-- Save Button -->
        <div class="settings-card">
          <div class="btn-group">
            <button type="submit" class="btn btn-primary" style="flex: 1;">
              <span class="material-icons">save</span>
              Save Settings
            </button>
          </div>
        </div>
      </div>
    </form>

    <a href="popup.html" class="back-link">
      <span class="material-icons">arrow_back</span>
      Back to BookDrive
    </a>

    <!-- Toast container for user feedback -->
    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script type="module" src="./options.js"></script>
  </body>
</html>
